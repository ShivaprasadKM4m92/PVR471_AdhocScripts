//# sourceMappingURL=deliveryOption.js.map
$(document).ready(function(){$(".selectlist.timezone.timezone-select-div  .dropdown-menu").css("width","334");initSelect2ForEmailUsers(".emailUsers");$(document).on("change",".dmsEnabled",function(a){this.checked?$("input[name$=format]").removeAttr("disabled"):$("input[name$=format]").attr("disabled","disabled")});$(".dmsEnabled").trigger("change")});
function initSelect2ForEmailUsers(a){var e=[];$(a).each(function(){var c=$(this),a=$.ajax({url:c.data("options-url"),dataType:"json"}).done(function(a){var d=c.data("value");$.map(a,function(b){c.append($("<option></option>").attr("value",b.key).text(b.value));return{id:b.key,text:b.value}});c.select2({placeholder:$(this).attr("placeholder")?$(this).attr("placeholder"):$.i18n._("placeholder.emailAddress"),allowClear:!0,width:"100%",formatNoMatches:function(b){var a=$(this).attr("id");return create=
"<div style='background: #eeeeee;padding: 5px'><input class='form-control newEmail' placeholder='"+$.i18n._("email.email")+"' id='newEmail"+a+"' value='"+b+"'><input style='margin-top: 3px;margin-bottom: 3px;' class='form-control newEmail' id='newEmailDescription"+a+"' placeholder='"+$.i18n._("email.description")+"'><button  data-id='"+a+"' class='btn btn-success addEmail'>"+$.i18n._("email.add")+"</button></div>"}}).parent().find(".select2-drop").on("click",".addEmail",function(){var b=$(this).data("id").replace(".",
"\\."),a=$("#"+b),c=$("#newEmail"+b).val(),d=$("#newEmailDescription"+b).val();""!=c&&isEmail(c)?""==d?($("#newEmailDescription"+b).css("border-color","#a94442"),setTimeout(function(){$("#newEmailDescription"+b).css("border-color","#ccc")},2E3)):$.ajax({url:emailAddUrl,type:"post",data:{email:c,description:d},success:function(b){b.status?($(".emailUsers").each(function(b,a){"SELECT"===a.tagName&&$("<option value='"+c+"'>"+encodeToHTML(d)+" - "+c+"</option>").appendTo($(a))}),b=a.select2("val"),b.push(c),
a.select2("val",b),a.select2("close")):alert(b.message)},error:function(b,a,c){4===b.readyState?401===b.status?alert($.i18n._("app.session.expired.error")):(console.log(b.status),console.log(b.statusText)):0===b.readyState?alert($.i18n._("app.network.error")):alert($.i18n._("app.ajax.unrecognized.error"))}}):($("#newEmail"+b).css("border-color","#a94442"),setTimeout(function(){$("#newEmail"+b).css("border-color","#ccc")},2E3))});d&&c.select2("val",d.split(","))}).fail(function(a,c){alert(0===a.status?
"Not connect.\n Verify Network.":404==a.status?"Requested page not found. [404]":500==a.status?"Internal Server Error [500].":"parsererror"===c?"Requested JSON parse failed.":"timeout"===c?"Time out error.":"Uncaught Error.\n"+a.responseText)});e.push(a)});$.when.apply($,e).done(function(){$(document).on("keyup",a,function(a){13==a.keyCode&&$(".addEmail").click()})})}function isEmail(a){return/\S+@\S+\.\S+/.test(a)};