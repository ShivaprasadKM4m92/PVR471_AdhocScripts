//# sourceMappingURL=eventGroup.js.map
$(document).ready(function(){function f(b,c){c.prepend('<div class="alert alert-danger alert-dismissible" role="alert"> <button type="button" class="close" data-dismiss="alert"> <span aria-hidden="true">&times;</span> <span class="sr-only"><g:message code="default.button.close.label" /></span> </button> '+b+"</div>");setTimeout(function(){$(".alert-danger").remove()},5E3)}$(document).on("click","#saveEventGroup",function(){var b=$("#eventGroupModal"),c=getDictionaryObject(EVENT_DICTIONARY),d={pva:c.getValuesPva()},
d={id:$("#eventGroupId").val(),groupName:$("#eventGroupName").val(),description:$("#eventGroupDescription").val(),sharedWith:$("#eventGroupShareWith").select2("val").join(";"),data:JSON.stringify(d)};if($("#saveEventGroup").hasClass("updateButton"))c.getSelectedDicGroups().length||(d.copyGroups=c.getValuesDicGroup()[0].id);else{var e=[];c.getValuesDicGroup().length&&($.each(c.getValuesDicGroup(),function(a,b){c.getSelectedDicGroups().length?c.isShowEnabled(b.id)||e.push(b.id):e.push(b.id)}),d.copyGroups=
e.join(","))}""!=$("#eventGroupName").val()&&$("#eventGroupShareWith").val()?(b.find(".btn-primary").each(function(){$(this).prop("disabled",!0)}),$.ajax({type:"POST",url:saveEventGroupUrl,data:d,dataType:"json",success:function(a){if(1==a.status){var d;d='<div class="alert alert-success alert-dismissible" role="alert"> <button type="button" class="close" data-dismiss="alert"> <span aria-hidden="true">&times;</span> <span class="sr-only"><g:message code="default.button.close.label" /></span> </button> '+
a.message;d+="</div>";b.modal("hide");$("#eventModal .modal-body").prepend(d);$("#mainContent").triggerHandler("columnView.reset."+EVENT_DICTIONARY);c.addToValuesDicGroup({name:a.name,id:a.groupId});c.setEventGroupUpdateText(a);enableDisableEventGroupButtons();setTimeout(function(){$(".alert-success").remove()},5E3)}else f(a.message,$("#eventGroupModal .modal-body"))},error:function(a){alert(a);b.modal("hide")},complete:function(){b.find(".btn-primary").each(function(){$(this).prop("disabled",!1)})}})):
f("Please fill the required fields.",$("#eventGroupModal .modal-body"))});$("#deleteEventGroup").on("click",function(){var b=$("#deleteEventGroupModal");b.modal("show");$("#deleteDlgErrorDivEventGrp").hide();b.find("#nameToDelete").text("Are you sure you want to delete the event group ?")});$("#deleteEventGrpButton").on("click",function(){var b=$("#eventGroupModal"),c=getDictionaryObject(EVENT_DICTIONARY),d=$("#deleteEventGroupModal"),e={groupName:$("#eventGroupName").val(),id:$("#eventGroupId").val()};
$.ajax({type:"POST",url:deleteEventGroupUrl,data:e,dataType:"json",success:function(a){1==a.status?(a='<div class="alert alert-success alert-dismissible" role="alert"> <button type="button" class="close" data-dismiss="alert"> <span aria-hidden="true">&times;</span> <span class="sr-only"><g:message code="default.button.close.label" /></span> </button> '+a.message,a+="</div>",b.modal("hide"),$("#eventModal .modal-body").prepend(a),$("#mainContent").triggerHandler("columnView.reset."+EVENT_DICTIONARY),
enableDisabledEventGroupButtons(c.getValues()),setTimeout(function(){$(".alert-success").remove()},5E3)):f(a.message,$("#eventGroupModal .modal-body"))},error:function(a){alert(a);b.modal("hide")},complete:function(){d.modal("hide")}})});$(".closeEventGrpDeleteModal").on("click",function(){$("#deleteEventGroupModal").modal("hide")});$(document).on("click",".closeEventGroupModal",function(){$("#eventGroupModal").modal("hide")});$(document).on("hidden.bs.modal","#eventGroupModal",function(b){$("#eventGroupModal").find(".alert").hide();
$(this).find("input[type=text]").val("").end();$(this).find("#eventGroupDescription").val("");$(this).find("#eventGroupShareWith").select2("val","");$(this).find("#eventGroupId").val("");$(this).find("#eventGroupName").val("");$(this).find("#eventGroupDescription").val("")})});