//# sourceMappingURL=dictionaries.js.map
var EVENT_DICTIONARY="event",PRODUCT_DICTIONARY="product",STUDY_DICTIONARY="study",SMQBROAD="Broad",eventDictionaryObj,productDictionaryObj,studyDictionaryObj,selectedDictionaryValue=[],Dictionary=function(b,d,e,h,p,n,r){this.isCloseDictionary=!0;var g,u,D,t={},q={},m={},v={},w=[],x=[],G=["pva"];this.currentSelectedLevel=0;var y,A,F={},B,a,c=!1,f=function(c){c&&(c.disabled=!0,c=c.style,document.location.href.split(),c.backgroundImage="url('"+a+"')",c.backgroundPosition="right center",c.backgroundRepeat=
"no-repeat")},k=function(a){t[a.level].push({name:a.name,id:a.id})},E=function(a,c,f){a={name:a.name,id:a.id};"pva"==f?q[c].push(a):"faers"==f?m[c].push(a):"eudra"==f&&v[c].push(a)},l=function(a,c,f){f=g==PRODUCT_DICTIONARY?f:c.level;for(var b=0;b<a[f].length;b++)if(a[f][b].id==c.id)return!0;return!1},C=function(a,c){return _.filter(a,function(a){if(a.id&&c.id){if(a.id===c.id)return!1}else if(a.name===c.name)return!1;return!0})},z=function(a){for(var c={},f=1;f<=a;f++)c[f]=[];return c};this.setReady=
function(){c=!0};this.isReady=function(){return c};this.setProductGroupText=function(a){var c=$(".selectedProductDictionaryValue")[0],f=$(c).find(".level-product-group");(c=$("#productGroupSelect").select2("data"))&&_.each(c,function(a){var c;a:{for(c=0;c<w.length;c++)if(w[c].id==a.id){c=!0;break a}c=!1}if(!c){c=$("<span class='productGroupValues'><span class='dictionaryItem'>"+a.name+'<span class=\'closebtn removeSingleDictionaryProductValue\'>\u00d7</span></span><i class="fa fa-pencil-square-o showAllProducts btn-show-products" data-id="'+
a.id+'"></i></span>');var b=c.find(".closebtn");b.attr("data-type",g);b.attr("data-element",JSON.stringify({name:a.name,id:a.id}));w.push({name:a.name,id:a.id});$(f).append(c)}});a&&_.each(getDictionaryObject(g).getValuesDicGroup(),function(a){var c=$("<span class='productGroupValues'><span class='dictionaryItem'>"+a.name+'<span class=\'closebtn removeSingleDictionaryProductValue\'>\u00d7</span></span><i class="fa fa-pencil-square-o showAllProducts btn-show-products" data-id="'+a.id+'"></i></span>'),
b=c.find(".closebtn");b.attr("data-type",g);b.attr("data-element",JSON.stringify({name:a.name,id:a.id}));$(f).append(c)})};this.setProductGroupUpdateText=function(a){var c=$(".selectedProductDictionaryValue")[0],c=$(c).find(".level-product-group"),f=$("<span class='productGroupValues'><span class='dictionaryItem'>"+a.name+'<span class=\'closebtn removeSingleDictionaryProductValue\'>\u00d7</span></span><i class="fa fa-pencil-square-o showAllProducts btn-show-products" data-id="'+a.groupId+'"></i></span>'),
b=f.find(".closebtn");b.attr("data-type",g);b.attr("data-element",JSON.stringify({name:a.name,id:a.groupId}));$(c).append(f)};this.setEventGroupText=function(a){a=$(".selectedEventDictionaryValue")[0];var c=$(a).find(".level-event-group");_.each(getDictionaryObject(g).getValuesDicGroup(),function(a){var f=$("<span class='eventGroupValues'><span class='dictionaryItem'>"+a.name+'<span class=\'closebtn removeSingleDictionaryEventValue\'>\u00d7</span></span><i class="fa fa-pencil-square-o showAllEvents btn-show-products" data-id="'+
a.id+'"></i></span>'),b=f.find(".closebtn");b.attr("data-type",g);b.attr("data-element",JSON.stringify({name:a.name,id:a.id}));$(c).append(f)})};this.setEventGroupUpdateText=function(a){var c=$(".selectedEventDictionaryValue")[0],c=$(c).find(".level-event-group"),f=$("<span class='eventGroupValues'><span class='dictionaryItem'>"+a.name+'<span class=\'closebtn removeSingleDictionaryEventValue\'>\u00d7</span></span><i class="fa fa-pencil-square-o showAllEvents btn-show-events" data-id="'+a.groupId+
'"></i></span>'),b=f.find(".closebtn");b.attr("data-type",g);b.attr("data-element",JSON.stringify({name:a.name,id:a.groupId}));$(c).append(f)};this.setDictionaryLevelText=function(a,c,f,b){if(0<a){var k,d;switch(g){case EVENT_DICTIONARY:k=$(".selectedEventDictionaryValue")[0];break;case PRODUCT_DICTIONARY:k=$(".selectedProductDictionaryValue")[0];break;case STUDY_DICTIONARY:k=$(".selectedStudyDictionaryValue")[0]}k=$(k).find(".level"+a)[0];var C=JSON.parse(dataSourcesColorMap),e="Safety DB";"faers"==
f?e="FAERS":"eudra"==f&&(e="EVDAS");var h=" "==c.id?c.name:c.name+" ("+c.id+")";d=g==PRODUCT_DICTIONARY?"undefined"!=typeof b?$('<span class="dictionaryItem" title="'+e+'">'+h+'<span class="closebtn removeSingleDictionaryValue">\u00d7</span></span>'):$('<span class="dictionaryItem" data-source="'+f+'" data-newproduct="new" title="'+e+'">'+h+'<span class="closebtn removeSingleDictionaryValue">\u00d7</span></span>'):$("<span class='dictionaryItem'>"+h+"<span class='closebtn removeSingleDictionaryValue'>\u00d7</span></span>");
g==PRODUCT_DICTIONARY?($.each(C,function(a,c){a==f&&c&&(d.css("background-color",c),d.css("color","#fff"),d.find(".closebtn").css("color","#fff"))}),b=!1,"pva"==f?b=l(q,c,a):"faers"==f?b=l(m,c,a):"eudra"==f&&(b=l(v,c,a)),b||E(c,a,f)):isDuplicateEventValues(q,c,a)||E(c,a,f);b=d.find(".closebtn");b.attr("data-type",g);b.attr("data-level",a);b.attr("data-element",JSON.stringify(c));$(k).append(d);$(k).append(" ")}};this.source=function(a,c,f,b,k,d){k=!0;var l=getDataSource(g);g===PRODUCT_DICTIONARY&&
"pva"!=l&&(k=!1);if(a&&k){$(".addEventValues").prop("disabled",!0);$(".addProductValues").prop("disabled",!0);$(".addAllProductValues").prop("disabled",!0);$(".addStudyValues").prop("disabled",!0);$(".addAllStudyValues").prop("disabled",!0);$(".addAllEvents").prop("disabled",!0);$(".addAllEventValues").prop("disabled",!0);$(".addAllProducts").prop("disabled",!0);$(".addAllStudies").prop("disabled",!0);$(".clearProductValues").prop("disabled",!0);$(".clearEventValues").prop("disabled",!0);$(".clearStudyValues").prop("disabled",
!0);$(".createProductGroup").prop("disabled",!0);$(".updateProductGroup").prop("disabled",!0);$(".createEventGroup").prop("disabled",!0);$(".updateEventGroup").prop("disabled",!0);$(".modal-footer .loading").css("display","inline");var e=this;$.ajax({type:"POST",url:u+a+"&dataSource="+l+"&dictionaryLevel="+f+(d?"&currentLang="+d:""),dataType:"json",success:function(a){b&&(selectedDictionaryValue.id=a.id,selectedDictionaryValue.name=a.name,selectedDictionaryValue.level=f,e.currentSelectedLevel=f,g===
EVENT_DICTIONARY&&4==f&&(a.primarySOC?(selectedDictionaryValue.primarySOC=a.primarySOC,selectedDictionaryValue.primaryHLT=a.primaryHLT,selectedDictionaryValue.primaryHLGT=a.primaryHLGT):(selectedDictionaryValue.primarySOC=null,selectedDictionaryValue.primaryHLT=null,selectedDictionaryValue.primaryHLGT=null)));a.nextLevelItems.length?c({items:a.nextLevelItems,lang:a.lang},f):c({items:[],lang:a.lang},f);$(".addEventValues").prop("disabled",!1);$(".addProductValues").prop("disabled",!1);$(".addAllProductValues").prop("disabled",
!1);$(".addStudyValues").prop("disabled",!1);$(".addAllStudyValues").prop("disabled",!1);$(".addAllEvents").prop("disabled",!1);$(".addAllEventValues").prop("disabled",!1);$(".addAllProducts").prop("disabled",!1);$(".addAllStudies").prop("disabled",!1);$(".clearProductValues").prop("disabled",!1);$(".clearEventValues").prop("disabled",!1);$(".clearStudyValues").prop("disabled",!1);$(".modal-footer .loading").css("display","none");enableDisableProductGroupButtons(getDictionaryObject(PRODUCT_DICTIONARY).getValues());
g==EVENT_DICTIONARY&&enableDisableEventGroupButtons()}})}};this.sourceParents=function(a,c,f,b){var k=getDataSource(g),d=D.split("?"),l=d[1].split("=")[0],k={dataSource:k,dictionaryLevel:c,currentLang:b?b:""};k[l]=""+a+"";a&&$.ajax({type:"POST",url:d[0],data:k,dataType:"json",success:function(a){0<a.length&&f({items:a,lang:b},c)}})};this.forSearch=function(a,c,b,k,d,l){this.currentSelectedLevel=c;f(l);var e=$("#event_exactSearch").is(":checked"),E=!1;g===PRODUCT_DICTIONARY?e=$("#product_exactSearch").is(":checked"):
g===STUDY_DICTIONARY&&(e=$("#study_exactSearch").is(":checked"),E=$("#study_imp").is(":checked"));var C=getDataSource(g);a=null!=delimiter&&"string"==typeof delimiter?{contains:a,dictionaryLevel:c,delimiter:delimiter,ref_level:b,exact_search:e,imp:E}:{contains:a,dictionaryLevel:c,ref_level:b,exact_search:e,imp:E};a.dataSource=C;if(k){var h={};$.each(k,function(a,c){h[c.key]=c.val});a.filters=JSON.stringify(h)}$.ajax({type:"POST",url:y,data:a,dataType:"json",success:function(a){a&&addAllStudyValues();
d({items:a},c);l&&(l.disabled=!1,l.style.backgroundImage="none")}})};this.addAllOptions=function(a){var c=this;g==PRODUCT_DICTIONARY?a.each(function(){var a=$(this).text(),f=$(this).attr("dictionarylevel"),b=$(this).attr("data-value");$(this).attr("data-source");a={name:a,id:b,level:f};f="pva"==getDataSource(g)?q:"faers"==getDataSource(g)?m:v;l(f,a,a.level)||(k(a),c.setDictionaryLevelText(a.level,a,getDataSource(g)))}):a.each(function(){var a=$(this).text(),f=$(this).attr("dictionarylevel"),b=$(this).attr("data-value"),
a={name:a,id:b,level:f};isDuplicateEventValues(q,a,f)||(k(a),c.setDictionaryLevelText(a.level,a,getDataSource(g)))})};this.clearSearchInputs=function(a){_.each($(A),function(c,f){f==a||$(c).hasClass("additionalCriteria")||(c.value="")})};var H=function(){_.each($("#productModal").find(".additionalCriteria"),function(a,c){$(a).html("")})};this.clearAdditionalFilters=function(){var a=$("#event_exactSearch");g==PRODUCT_DICTIONARY?(a=$("#product_exactSearch"),$("#productGroupSelect").select2("val",""),
H()):g==STUDY_DICTIONARY?(a=$("#study_exactSearch"),$("#studyDrugs").select2("val","")):g==EVENT_DICTIONARY&&($("#eventSmqSelect").select2("val",""),$("#eventGroupSelect").select2("val",""));a.prop("checked",!1)};this.clearAllText=function(){var a=$(".eventDictionaryValue");g==PRODUCT_DICTIONARY?a=$(".productDictionaryValue"):g==STUDY_DICTIONARY&&(a=$(".studyDictionaryValue"));_.each(a,function(a){a.innerHTML=""})};this.clearProductGroupText=function(){g==PRODUCT_DICTIONARY&&$(".level-product-group").empty()};
this.clearEventGroupText=function(){g==EVENT_DICTIONARY&&$(".level-event-group").empty()};this.resetDictionaryList=function(){t=z(B);q=z(B);m=z(B);v=z(B);w=[];x=[]};this.setColumnViewText=function(a,c,f){var b=this,k;for(k in a)a.hasOwnProperty(k)&&_.each(a[k],function(a){b.setDictionaryLevelText(k,a,c,f)})};this.refresh=function(){var a=this,c;for(c in t)t.hasOwnProperty(c)&&_.each(t[c],function(f){a.setDictionaryLevelText(c,f)})};this.removeValue=function(a,c,f){t[a]=C(t[a],c);"FAERS"==f?m[a]=C(m[a],
c):"EVDAS"==f?v[a]=C(v[a],c):q[a]=C(q[a],c)};this.getValuesDicGroup=function(){return w};this.setValuesDicGroup=function(a){w=a};this.addToValuesDicGroup=function(a){1!=$.map(w,function(c){return c.id==a.id})&&w.push(a)};this.getSelectedDicGroups=function(){return x};this.setSelectedDicGroups=function(a){x=a};this.addToSelectedDicGroups=function(a){x.push(a)};this.getAllowedDataSourcesProduct=function(){return G};this.setAllowedDataSourcesProduct=function(a){G=a};this.getValues=function(){return t};
this.setValues=function(a){t=a};this.getValuesPva=function(){return q};this.setValuesPva=function(a){q=a};this.getValuesFaers=function(){return m};this.setValuesFaers=function(a){m=a};this.getValuesEudra=function(){return v};this.setValuesEudra=function(a){v=a};this.getLevels=function(){return F};this.setLevels=function(a){F=a};this.resetValues=function(){t=z(e)};this.isShowEnabled=function(a){var c=!1;$.each(x,function(f,b){if(b.result.id==a)return c=!0});return c};this.construct=function(c,f,b,
k,l,d,e){y=d;g=c;c===EVENT_DICTIONARY&&(u=k+"?eventId=",D=l+"?eventIds=",A="input.searchEvents");c===PRODUCT_DICTIONARY&&(u=k+"?productId=",D=l+"?productIds=",A="input.searchProducts");c===STUDY_DICTIONARY&&(u=k+"?studyId=",D=l+"?studyIds=",A="input.searchStudies");$.each(f.split(","),function(a,c){F[a+1]=c});B=b;t=z(b);for(c=1;3>=c;c++);q=z(b);m=z(b);v=z(b);a=e};return this.construct(b,d,e,h,p,n,r)};
function intializeDictionaries(b){b.event&&(eventDictionaryObj=new Dictionary(EVENT_DICTIONARY,b.event.levelNames,b.event.dicColumnCount,b.event.selectUrl,b.event.preLevelParentsUrl,b.event.searchUrl,b.spinnerPath));b.product&&(productDictionaryObj=new Dictionary(PRODUCT_DICTIONARY,b.product.levelNames,b.product.dicColumnCount,b.product.selectUrl,b.product.preLevelParentsUrl,b.product.searchUrl,b.spinnerPath));b.study&&(studyDictionaryObj=new Dictionary(STUDY_DICTIONARY,b.study.levelNames,b.study.dicColumnCount,
b.study.selectUrl,b.study.preLevelParentsUrl,b.study.searchUrl,b.spinnerPath))}function getDictionaryObject(b){if(b){if(b.toLowerCase()===EVENT_DICTIONARY)return eventDictionaryObj;if(b.toLowerCase()===PRODUCT_DICTIONARY)return productDictionaryObj;if(b.toLowerCase()===STUDY_DICTIONARY)return studyDictionaryObj}}function source(b,d,e,h,p,n,r){getDictionaryObject(h).source(b,d,e,p,n,r)}function sourceParents(b,d,e,h,p){getDictionaryObject(h).sourceParents(b,d,e,p)}
function forSearch(b,d,e,h,p,n,r){getDictionaryObject(n).forSearch(b,d,e,h,p,r)}function addAllStudyValues(){$(document).on("click",".addAllStudyValues",function(){var b=getDictionaryObject(STUDY_DICTIONARY),d=$(this).parents("#studyModal").find('[class*="dicLi"][dictionarylevel="2"]');b.addAllOptions(d)})}function clearSearchInputs(b,d){getDictionaryObject(d).clearSearchInputs(b)}function clearAdditionalFilters(b){getDictionaryObject(b).clearAdditionalFilters()}
function clearAllText(b){getDictionaryObject(b).clearAllText()}function clearDicGroupText(b){var d=getDictionaryObject(b);b==PRODUCT_DICTIONARY&&d.clearProductGroupText();b==EVENT_DICTIONARY&&d.clearEventGroupText()}function resetDictionaryList(b){getDictionaryObject(b).resetDictionaryList()}function dictionaryReadyForUse(b){getDictionaryObject(b).setReady()}
function resetMultiSearchModal(){var b=$("#copyAndPasteDicModal");b.find(".copyPasteContent").val("");b.find(".c_n_p_other_delimiter").val("");b.find(":radio[value=none]").prop("checked",!0);$("#study_imp").is(":checked")&&$("#study_imp").prop("checked",!1)}function generateIdList(b){return _.map(b.items,function(b){return b.id.toString()})}function generateColList(b){return _.map(b,function(b){return b.getAttribute("data-value")})}
function collectNextCol(b){var d={},e=[];_.each(b,function(b){b={id:b.getAttribute("data-value"),name:b.innerText,level:b.getAttribute("dictionaryLevel")};e.push(b)});d.items=e;return d}
function generateNewDataForCol(b,d){var e=generateIdList(b),h=generateColList(d.querySelectorAll("li")),e=_.intersection(e,h),h=collectNextCol(d.querySelectorAll("li"));e?h.selectedPath=e[0]:(h=b,h.selectedPath=d.querySelector(".highlighted").getAttribute("data-value"));h.highlightedValue=d.querySelector(".highlighted").getAttribute("data-value");return h}
function setProductEventDictionary(){if(0<$("input[name=optradio]").size()){var b=$("input[name=optradio]:checked")[0];$(b).hasClass("productRadio")?$("#studySelection").val(""):$("#productSelection").val("").trigger("change")}}function getReportFieldLevel(){return $("#selectField option:selected").attr("data-level")}function getReportFieldDicType(){return $("#selectField option:selected").attr("data-dictionary")}function showEventDicIcon(b){b?$("#searchEvents").show():$("#searchEvents").hide()}
function showProductDicIcon(b){b?$("#searchProducts").show():$("#searchProducts").hide()}function showStudyDicIcon(b){b?$("#searchStudies").show():$("#searchStudies").hide()}function checkSuspectProduct(){checkProductDependedntCheckboxes("#suspectProduct")}function checkIncludeAllStudyDrugsCases(){checkProductDependedntCheckboxes("#includeAllStudyDrugsCases")}function checkHeaderProductSelection(){checkProductDependedntCheckboxes("input[id$='headerProductSelection']")}
function checkProductDependedntCheckboxes(b){""!==$("#productSelection").val()||$("#isTemplate").is(":checked")||""!==$("#productGroupSelection").val()&&"[]"!==$("#productGroupSelection").val()?$(b).removeAttr("disabled"):($(b).prop("checked",!1),$(b).attr("disabled",!0))}function getFieldLevelFromExpression(b){return $(b.querySelector("select.expressionField")).find("option:selected").attr("data-level")}
function showDictionaryValues(b,d,e,h,p,n){var r="";b.innerHTML="";if(h){var g="Product";e==STUDY_DICTIONARY&&(g="Study");e==EVENT_DICTIONARY&&(g="Event");_.each(h,function(b){r+=b.name.substring(0,b.name.lastIndexOf("(")-1)+" ("+g+" Group), "})}if(d)for(var u in d)d.hasOwnProperty(u)&&_.each(d[u],function(b){r+=b.name+" ("+p[u]+"), "});d=document.createElement("div");n&&(d.style.padding="5px");d.innerHTML=r.substring(0,r.length-2);b.appendChild(d);checkSuspectProduct();checkIncludeAllStudyDrugsCases();
checkHeaderProductSelection()}function getDataSource(b){var d=$("#dataSourcesProductDict");return b==PRODUCT_DICTIONARY?0<d.length?d.val():"pva":"pva"}
function enableDisableProductGroupButtons(b){b=$(".productDictionaryValue").find(".dictionaryItem");var d=getDictionaryObject(PRODUCT_DICTIONARY);0<b.length&&d.getValuesDicGroup().length?($(".updateProductGroup").attr("disabled",!1),$(".createProductGroup").attr("disabled",!1)):0<b.length&&!d.getValuesDicGroup().length?($(".updateProductGroup").attr("disabled",!0),$(".createProductGroup").attr("disabled",!1)):d.getValuesDicGroup().length?($(".updateProductGroup").attr("disabled",!1),$(".createProductGroup").attr("disabled",
!1)):($(".updateProductGroup").attr("disabled",!0),$(".createProductGroup").attr("disabled",!0))}
function enableDisableEventGroupButtons(){var b=$(".eventDictionaryValue").find(".dictionaryItem"),d=getDictionaryObject(EVENT_DICTIONARY);0<b.length&&d.getValuesDicGroup().length?($(".updateEventGroup").attr("disabled",!1),$(".createEventGroup").attr("disabled",!1)):0<b.length&&!d.getValuesDicGroup().length?($(".updateEventGroup").attr("disabled",!0),$(".createEventGroup").attr("disabled",!1)):d.getValuesDicGroup().length?($(".updateEventGroup").attr("disabled",!1),$(".createEventGroup").attr("disabled",
!1)):($(".updateEventGroup").attr("disabled",!0),$(".createEventGroup").attr("disabled",!0))}function enableDisabledEventGroupButtons(b){var d=!0,e;for(e in b)b.hasOwnProperty(e)&&0<b[e].length&&(d=!1);d?$(".createEventGroup").attr("disabled",!0):($(".createEventGroup").attr("disabled",!1),$(".updateEventGroup").attr("disabled",!1))}
function showEventGroupValues(b){var d=$(".selectedEventDictionaryValue")[0],d=$(d).find(".level-event-group");if(b&&0<b.length){var e=getDictionaryObject(EVENT_DICTIONARY),h=e.getValuesDicGroup();null==h&&(h=[]);for(var p=0;p<b.length;p++){var n=b[p];if(!checkIfEventGroupObjectExist(h,n.id)){var r=$("<span class='eventGroupValues'><span class='dictionaryItem'>"+n.name+'<span class=\'closebtn removeSingleDictionaryEventValue\'>\u00d7</span></span><i class="fa fa-pencil-square-o showAllEvents btn-show-events" data-id="'+
n.id+'"></i></span>'),g=r.find(".closebtn");g.attr("data-type",e.dictionaryType);g.attr("data-element",JSON.stringify({name:n.name,id:n.id}));h.push({name:n.name,id:n.id});$(d).append(r)}}e.setValuesDicGroup(h)}}var checkIfEventGroupObjectExist=function(b,d){for(var e=0;e<b.length;e++)if(b[e].id===d)return!0;return!1},isDuplicateEventValues=function(b,d,e){e=void 0!=e?e:d.level;if(void 0!=b[e]&&0<b[e].length)for(var h=0;h<b[e].length;h++)if(b[e][h].id==d.id)return!0;return!1};
$(document).ready(function(){function b(a){$.get(userDetailUrl,function(c){a.select2("data",c)})}function d(a,c,f){a.select2({minimumInputLength:0,multiple:!0,closeOnSelect:!1,placeholder:"Select Share With",width:"100%",separator:";",ajax:{quietMillis:250,dataType:"json",url:c,data:function(a,c){return{term:a,page:c,max:30,lang:userLocale}},results:function(a,c){return{results:a.items,more:30*c<a.total_count}}},escapeMarkup:function(a){return a}})}function e(a){var c=$("#eventSmqSelect").select2("data");
if(c&&0<c.length)if(void 0!=a&&_.find(c,function(c){return a!=(c.type===SMQBROAD?7:8)}))$(".errorMessage").show();else{var f=getDictionaryObject(EVENT_DICTIONARY),b=f.getValues(),d=f.getValuesPva();null==b[7]&&(b[7]=[]);null==d[7]&&(d[7]=[]);null==b[8]&&(b[8]=[]);null==d[8]&&(d[8]=[]);for(var l=0;l<c.length;l++){var e=c[l],g=e.type==SMQBROAD?7:8;if(!_.find(d[g],function(a){return a.id==e.code})){var h={name:e.name,id:e.code};d[g].push(h);b[g].push(h);f.setDictionaryLevelText(g,h)}}f.setValuesPva(d);
f.setValues(b)}}function h(a){a&&void 0!=a||(a=$("#eventGroupSelect").select2("data"));var c=$(".selectedEventDictionaryValue")[0],c=$(c).find(".level-event-group");if(a&&0<a.length){var f=getDictionaryObject(EVENT_DICTIONARY),b=f.getValuesDicGroup();null==b&&(b=[]);for(var d=0;d<a.length;d++){var l=a[d],e;a:{for(e=0;e<b.length;e++)if(b[e].id===l.id){e=!0;break a}e=!1}if(!e){e=$("<span class='eventGroupValues'><span class='dictionaryItem'>"+l.name+'<span class=\'closebtn removeSingleDictionaryEventValue\'>\u00d7</span></span><i class="fa fa-pencil-square-o showAllEvents btn-show-events" data-id="'+
l.id+'"></i></span>');var g=e.find(".closebtn");g.attr("data-type",f.dictionaryType);g.attr("data-element",JSON.stringify({name:l.name,id:l.id}));b.push({name:l.name,id:l.id});$(c).append(e)}}f.setValuesDicGroup(b)}}function p(a,c,f,b){$(".prodDictFilterColCalc label:contains('Family')").next("input").prop("disabled",a);$(".prodDictFilterColCalc label:contains('Trade Name')").next("input").prop("disabled",c);$(".prodDictFilterColCalc label:contains('Product Name')").next("input").prop("disabled",
f);$(".prodDictFilterColCalc label:contains('Ingredient')").next("input").prop("disabled",b)}function n(a){var c="",f=!0,b;for(b in a)a.hasOwnProperty(b)&&0<a[b].length&&(f=!1);f||(c=JSON.stringify(a));return c}function r(a){var c=!0,b;for(b in a)a.hasOwnProperty(b)&&0<a[b].length&&(c=!1);return c}function g(a){var c=getDictionaryObject(EVENT_DICTIONARY),b=$(a).closest("[class*='toAddContainer']").first();a=c.getValues();if(0<b.size()){var k=getFieldLevelFromExpression(b[0]),b=$(getValueTextFromExpression(b[0])).val();
a[k]=t(b);c.setValues(a);c.setColumnViewText(c.getValues())}else $("#eventSelection").val()&&(c.setValues(JSON.parse($("#eventSelection").val())),c.setValuesPva(JSON.parse($("#eventSelection").val())),c.setColumnViewText(c.getValues())),$("#eventGroupSelection").val()&&(a=JSON.parse($("#eventGroupSelection").val()),$.each(a,function(a,b){c.addToValuesDicGroup({name:b.name,id:b.id})}),m&&c.setEventGroupText(m)),enableDisableEventGroupButtons()}function u(a){a=$(a).closest("[class*='toAddContainer']").first();
if(0<a.size())return getFieldLevelFromExpression(a[0])}function D(a){var c="";$.each(a,function(){c+=this.name+";"});return c.substring(0,c.length-1)}function t(a){var c=[];a&&$.each(a.split(";"),function(){c.push({name:this,id:" "})});return c}var q,m="true"===$("#editable").val();"true"!==$("#fromTemplate").val()&&(checkSuspectProduct(),checkIncludeAllStudyDrugsCases(),checkHeaderProductSelection());$("#productSearchIconLoading").remove();$("#productSearchIcon").show();$("input:radio[name=optradio]").prop("disabled",
!1);dictionaryBindMultipleSelect2WithUrl($("#eventSmqSelect"),getSmqDropdownListUrl,!0,$.i18n._("selectOne"),EVENT_DICTIONARY,$(".selectedDatasource"));dictionaryBindMultipleSelect2WithUrl($("#productGroupSelect"),productGroupListUrl,!0,"Select Product Group",PRODUCT_DICTIONARY,$("#selectedDatasource"));d($("#shareWithProductGroup"),sharedWithListProductGroupUrl);dictionaryBindMultipleSelect2WithUrl($("#eventGroupSelect"),getEventGroupDropdownListUrl,!0,"Select Event Group",EVENT_DICTIONARY);d($("#eventGroupShareWith"),
getEventGroupShareWithDropdownListUrl);$(document).on("click",".createProductGroup",function(){$("#productGroupModalDict").find(".alert").hide();$("#saveProductGroup").removeClass("createButton updateButton");$("#saveProductGroup").addClass("createButton");$("#productGroupModalDict").find("#deleteProductGroup").hide();$("#productGroupDictLabel").html("Create Product Group");$("#productGroupModalDict").modal("show");b($("#shareWithProductGroup"))});$(document).on("click",".updateProductGroup",function(){var a=
$("#productGroupModalDict");a.find(".alert").hide();$("#productGroupModalDict").find("#deleteProductGroup").show();var c=getDictionaryObject(PRODUCT_DICTIONARY);if(1<c.getValuesDicGroup().length)y("Update group is allowed for one product group, Please select one product group to update",$("#productModal .modal-body"));else if($("#saveProductGroup").removeClass("createButton updateButton"),$("#saveProductGroup").addClass("updateButton"),$("#productGroupDictLabel").html('Update Product Group <i data-toggle="popover" id="groupPopUpProdGrp" data-trigger="hover" data-html="true" data-container="body" data-original-title="Details" title=""><span class="fa fa-info-circle" style="font-size: 16px; cursor: pointer"></span></i>'),
$("#productGroupDictLabel").find("#groupPopUpProdGrp").popover({sanitize:!1,html:!0}),c=c.getSelectedDicGroups()[0],void 0==c)c=$("#productModal").find(".closebtn").attr("data-element"),c=JSON.parse(c).id,v(c,a);else{var b="<span> Created By: "+c.result.createdBy+"</span><br>",b=b+("<span> Created Date: "+c.result.dateCreated+"</span><br>"),b=b+("<span> Last Modified By: "+c.result.modifiedBy+"</span><br>"),b=b+("<span> Last Modified Date: "+c.result.lastUpdated+"</span>");$("#productGroupDictLabel").find("#groupPopUpProdGrp").attr("data-content",
b);a.modal("show");a.find("#productGroupId").val(c.result.id);a.find("#productGroupName").val(c.result.groupName);a.find("#descriptionProductGroup").val(c.result.description);$("#shareWithProductGroup").select2("val","");var k=[];$.each(c.result.sharedWithUser,function(a,c){k.push({id:c.id,text:c.text})});$.each(c.result.sharedWithGroup,function(a,c){k.push({id:c.id,text:c.text})});$("#shareWithProductGroup").select2("data",k)}});var v=function(a,c){$.ajax({type:"POST",url:fetchProductGroupsUrl,data:{id:a},
dataType:"json",async:!1,success:function(a){var b="<span> Created By: "+a.result.createdBy+"</span><br>",b=b+("<span> Created Date: "+a.result.dateCreated+"</span><br>"),b=b+("<span> Last Modified By: "+a.result.modifiedBy+"</span><br>"),b=b+("<span> Last Modified Date: "+a.result.lastUpdated+"</span>");$("#productGroupDictLabel").find("#groupPopUpProdGrp").attr("data-content",b);c.modal("show");c.find("#productGroupId").val(a.result.id);c.find("#productGroupName").val(a.result.groupName);c.find("#descriptionProductGroup").val(a.result.description);
$("#shareWithProductGroup").select2("val","");var d=[];$.each(a.result.sharedWithUser,function(a,c){d.push({id:c.id,text:c.text})});$.each(a.result.sharedWithGroup,function(a,c){d.push({id:c.id,text:c.text})});$("#shareWithProductGroup").select2("data",d)}})},w=function(a,c){$.ajax({type:"POST",url:fetchEventGroupsUrl,data:{id:a},dataType:"json",async:!1,success:function(a){var b="<span> Created By: "+a.result.createdBy+"</span><br>",b=b+("<span> Created Date: "+a.result.dateCreated+"</span><br>"),
b=b+("<span> Last Modified By: "+a.result.modifiedBy+"</span><br>"),b=b+("<span> Last Modified Date: "+a.result.lastUpdated+"</span>");$("#eventGroupLabel").find("#groupPopUp").attr("data-content",b);c.modal("show");c.find("#eventGroupId").val(a.result.id);c.find("#eventGroupName").val(a.result.groupName);c.find("#eventGroupDescription").val(a.result.description);$("#eventGroupShareWith").select2("val","");var d=[];$.each(a.result.sharedWithUser,function(a,c){d.push({id:c.id,text:c.text})});$.each(a.result.sharedWithGroup,
function(a,c){d.push({id:c.id,text:c.text})});$("#eventGroupShareWith").select2("data",d)}})};$(document).on("click",".createEventGroup",function(){$("#eventGroupModal").find(".alert").hide();$("#saveEventGroup").removeClass("createButton updateButton");$("#saveEventGroup").addClass("createButton");$("#eventGroupModal").find("#deleteEventGroup").hide();$("#eventGroupLabel").html("Create Event Group");$("#eventGroupModal").modal("show");b($("#eventGroupShareWith"))});$(document).on("click",".updateEventGroup",
function(){var a=getDictionaryObject(EVENT_DICTIONARY),c=$("#eventGroupModal");c.find(".alert").hide();c.find("#deleteEventGroup").show();if(1<a.getValuesDicGroup().length)y("Update group is allowed for one event group, Please select one event group to update",$("#eventModal .modal-body"));else if($("#saveEventGroup").removeClass("createButton updateButton"),$("#saveEventGroup").addClass("updateButton"),$("#eventGroupLabel").html('Update Event Group <i data-toggle="popover" id="groupPopUp" data-trigger="hover" data-html="true" data-container="body" data-original-title="Details" title=""><span class="fa fa-info-circle" style="font-size: 16px; cursor: pointer"></span></i>'),
$("#eventGroupLabel").find("#groupPopUp").popover({sanitize:!1,html:!0}),a=a.getSelectedDicGroups()[0],void 0==a)a=$("#eventModal").find(".closebtn").attr("data-element"),a=JSON.parse(a).id,w(a,c);else{var b="<span> Created By: "+a.result.createdBy+"</span><br>",b=b+("<span> Created Date: "+a.result.dateCreated+"</span><br>"),b=b+("<span> Last Modified By: "+a.result.modifiedBy+"</span><br>"),b=b+("<span> Last Modified Date: "+a.result.lastUpdated+"</span>");$("#eventGroupLabel").find("#groupPopUp").attr("data-content",
b);c.modal("show");c.find("#eventGroupId").val(a.result.id);c.find("#eventGroupName").val(a.result.groupName);c.find("#eventGroupDescription").val(a.result.description);$("#eventGroupShareWith").select2("val","");var d=[];$.each(a.result.sharedWithUser,function(a,c){d.push({id:c.id,text:c.text})});$.each(a.result.sharedWithGroup,function(a,c){d.push({id:c.id,text:c.text})});$("#eventGroupShareWith").select2("data",d)}});var x=function(a,c,b){b=getDictionaryObject(PRODUCT_DICTIONARY).dictionaryType==
PRODUCT_DICTIONARY?b:c.level;if(void 0!=a[b]&&0<a[b].length)for(var d=0;d<a[b].length;d++)if(a[b][d].id==c.id)return!0;return!1};$(document).on("click",".showAllProducts",function(a){$.ajax({type:"POST",url:showAllProductsUrl,data:{id:$(this).attr("data-id")},dataType:"json",success:function(a){var b=JSON.parse(a.result.data),d=getDictionaryObject(PRODUCT_DICTIONARY);if(void 0!=b.pva&&0<Object.keys(b.pva).length){$.each(b.pva,function(a,c){0!=c.length&&$.each(c,function(c,b){c={name:b.name,id:b.id,
level:a};x(d.getValuesPva(),c)||d.getValuesPva()[a].push({name:b.name,id:b.id})})});var e=$(".productDictionaryValue").find('span[title="Safety DB"]');_.each(e,function(a){a.remove()});d.setColumnViewText(d.getValuesPva(),"pva",!0)}void 0!=b.faers&&0<Object.keys(b.faers).length&&($.each(b.faers,function(a,c){0!=c.length&&$.each(c,function(c,b){c={name:b.name,id:b.id,level:a};x(d.getValuesFaers(),c)||d.getValuesFaers()[a].push({name:b.name,id:b.id})})}),e=$(".productDictionaryValue").find('span[title="FAERS"]'),
_.each(e,function(a){a.remove()}),d.setColumnViewText(d.getValuesFaers(),"faers",!0));void 0!=b.eudra&&0<Object.keys(b.eudra).length&&($.each(b.eudra,function(a,c){0!=c.length&&$.each(c,function(c,b){c={name:b.name,id:b.id,level:a};x(d.getValuesEudra(),c)||d.getValuesEudra()[a].push({name:b.name,id:b.id})})}),e=$(".productDictionaryValue").find('span[title="EVDAS"]'),_.each(e,function(a){a.remove()}),d.setColumnViewText(d.getValuesEudra(),"eudra",!0));a.result.canEdit?$(".updateProductGroup").attr("disabled",
!1):$(".updateProductGroup").attr("disabled",!0);d.addToSelectedDicGroups(a)}})});$(document).on("click",".showAllEvents",function(a){$.ajax({type:"POST",url:showAllEventsUrl,data:{id:$(this).attr("data-id")},dataType:"json",success:function(a){var b=JSON.parse(a.result.data),d=getDictionaryObject(EVENT_DICTIONARY);if(void 0!=b.pva&&0<Object.keys(b.pva).length){var e=d.getValuesPva();$.each(b.pva,function(a,c){0!=c.length&&$.each(c,function(c,b){isDuplicateEventValues(e,{name:b.name,id:b.id,level:a},
a)||(null==e[a]&&(e[a]=[]),e[a].push({name:b.name,id:b.id}))})});b=$(".eventDictionaryValue").find("span.dictionaryItem");_.each(b,function(a){a.remove()});d.setColumnViewText(e,"pva",!0)}a.result.canEdit?$(".updateEventGroup").attr("disabled",!1):$(".updateEventGroup").attr("disabled",!0);d.addToSelectedDicGroups(a)}})});$(document).on("click",".addProductValues",function(){var a=$(this).parents("#productModal").find(".dicLi.selectedBackground");"eudra"==getDataSource(PRODUCT_DICTIONARY)&&a.length&&
!r(getDictionaryObject(PRODUCT_DICTIONARY).getValuesEudra())?y("Selection of multiple ingredients for EVDAS data source is not allowed",$("#productModal .modal-body")):(getDictionaryObject(PRODUCT_DICTIONARY).addAllOptions(a),getDictionaryObject(PRODUCT_DICTIONARY).setProductGroupText(),enableDisableProductGroupButtons(getDictionaryObject(PRODUCT_DICTIONARY).getValues()))});$(document).on("click",".addAllProductValues",function(){var a=getDictionaryObject(PRODUCT_DICTIONARY),c=$(this).parents("#productModal").find('[class*="dicLi"][dictionarylevel="'+
a.currentSelectedLevel+'"]');"eudra"==getDataSource(PRODUCT_DICTIONARY)&&c.length&&!r(getDictionaryObject(PRODUCT_DICTIONARY).getValuesEudra())?y("Selection of multiple ingredients for EVDAS data source is not allowed",$("#productModal .modal-body")):(a.addAllOptions(c),a.setProductGroupText(),enableDisableProductGroupButtons(getDictionaryObject(PRODUCT_DICTIONARY).getValues()))});$(document).on("click",".addStudyValues",function(){var a=$(this).parents("#studyModal").find(".dicLi.selectedBackground");
getDictionaryObject(STUDY_DICTIONARY).addAllOptions(a)});$(document).on("click",".addAllStudyValues",function(){var a=getDictionaryObject(STUDY_DICTIONARY),c=$(this).parents("#studyModal").find('[class*="dicLi"][dictionarylevel="'+a.currentSelectedLevel+'"]');a.addAllOptions(c)});$(document).on("click",".addEventValues",function(){var a=u(q),c=$(this).parents("#eventModal").find(".dicLi.selectedBackground");$(".errorMessage").hide();if(void 0!=a)for(var b=0;b<c.length;b++)if($(c[b]).attr("dictionarylevel")!=
a){$(".errorMessage").show();return}e(a);h();getDictionaryObject(EVENT_DICTIONARY).addAllOptions(c);enableDisableEventGroupButtons()});$(document).on("click",".addAllEvents",function(){var a=q,c=getDictionaryObject(EVENT_DICTIONARY),a=$(a).closest("[class*='toAddContainer']").first(),b=c.getValues();0<a.size()?(c=getFieldLevelFromExpression(a[0]),$(getValueTextFromExpression(a[0])).val(D(b[c]))):($("#eventSelection").val(n(b)),$("#eventGroupSelection").val(JSON.stringify(c.getValuesDicGroup())).trigger("change"),
showDictionaryValues(document.getElementById("showEventSelection"),c.getValues(),EVENT_DICTIONARY,c.getValuesDicGroup(),c.getLevels(),m))});$(document).on("click",".addAllEventValues",function(){var a=u(q),c=getDictionaryObject(EVENT_DICTIONARY),b=$(this).parents("#eventModal").find('[class*="dicLi"][dictionarylevel="'+c.currentSelectedLevel+'"]');$(".errorMessage").hide();if(void 0!=a)for(var d=0;d<b.length;d++)if($(b[d]).attr("dictionarylevel")!=a){$(".errorMessage").show();return}e(a);h();c.addAllOptions(b);
enableDisableEventGroupButtons()});$(document).on("click",".removeSingleDictionaryEventValue",function(a){a=getDictionaryObject(EVENT_DICTIONARY);var c=$(this),c=JSON.parse(c.attr("data-element"));$(this).closest(".eventGroupValues").remove();a.setValuesDicGroup(G(a.getValuesDicGroup(),c));a.setSelectedDicGroups(B(a.getSelectedDicGroups(),c));enableDisableEventGroupButtons()});var G=function(a,c){return _.filter(a,function(a){if(a.id&&c.id){if(a.id===c.id)return!1}else if(a.name===c.name)return!1;
return!0})},y=function(a,c){c.prepend('<div class="alert alert-danger alert-dismissible" role="alert"> <button type="button" class="close" data-dismiss="alert"> <span aria-hidden="true">&times;</span> <span class="sr-only"><g:message code="default.button.close.label" /></span> </button> '+a+"</div>");setTimeout(function(){$(".alert-danger").remove()},5E3)};$(document).on("click",".addAllProducts",function(){var a=getDictionaryObject(PRODUCT_DICTIONARY),c=$.unique($.map($('#productModal [data-newproduct="new"]'),
function(a,c){return $(a).data("source")}));c.length&&1<c.length?y("Products across data sources are selected, please create product group before proceeding",$("#productModal .modal-body")):c.length&&0>$.inArray(c[0],a.getAllowedDataSourcesProduct())?y("Products from the data source is not allowed, please either create/update product group or remove products",$("#productModal .modal-body")):($("#productSelection").val(n(a.getValues())).trigger("change"),$("#productGroupSelection").val(JSON.stringify(a.getValuesDicGroup())).trigger("change"),
checkSuspectProduct(),checkIncludeAllStudyDrugsCases(),checkHeaderProductSelection(),showDictionaryValues(document.getElementById("showProductSelection"),a.getValues(),PRODUCT_DICTIONARY,a.getValuesDicGroup(),a.getLevels(),m),$("#productModal").modal("hide"))});$(document).on("click",".addAllStudies",function(){var a=getDictionaryObject(STUDY_DICTIONARY);$("#studySelection").val(n(a.getValues()));checkSuspectProduct();checkIncludeAllStudyDrugsCases();checkHeaderProductSelection();showDictionaryValues(document.getElementById("showStudySelection"),
a.getValues(),STUDY_DICTIONARY,[],a.getLevels(),m)});$("#productSelection").change(function(){checkSuspectProduct();checkIncludeAllStudyDrugsCases();checkHeaderProductSelection()});$("#productModal").on("shown.bs.modal",function(a){if(0<$(".selectedDatasource").length&&-1==$(".selectedDatasource").val().indexOf("pva")){if(-1!=$(".selectedDatasource").val().indexOf("faers")){$("#dataSourcesProductDict").select2("val","faers").trigger("change");return}if(-1!=$(".selectedDatasource").val().indexOf("eudra")){$("#dataSourcesProductDict").select2("val",
"eudra").trigger("change");return}}0<$("#dataSourcesProductDict").length&&$("#dataSourcesProductDict").select2("val","pva").trigger("change");(a=$(a.relatedTarget).data("allowed-sources-product"))&&getDictionaryObject(PRODUCT_DICTIONARY).setAllowedDataSourcesProduct(a.split(","))});$("#dataSourcesProductDict").on("change",function(){"faers"===this.value?(p(!0,!0,!1,!1),$(".repeat-container .dropdown-menu [data-value='hourly']").hide()):"eudra"===this.value?(p(!0,!0,!0,!1),$(".repeat-container .dropdown-menu [data-value='hourly']").show()):
p(!1,!1,!1,!1)});(function(){if($("#eventSelection").val()){var a=getDictionaryObject(EVENT_DICTIONARY);a.setValues(JSON.parse($("#eventSelection").val()));a.setValuesPva(JSON.parse($("#eventSelection").val()));m&&a.setColumnViewText(a.getValues())}if($("#eventGroupSelection").val()){var a=getDictionaryObject(EVENT_DICTIONARY),c=JSON.parse($("#eventGroupSelection").val());$.each(c,function(c,b){a.addToValuesDicGroup({name:b.name,id:b.id})});m&&a.setEventGroupText(m)}if($("#eventSelection").val()||
$("#eventGroupSelection").val())showDictionaryValues(document.getElementById("showEventSelection"),a.getValues(),EVENT_DICTIONARY,a.getValuesDicGroup(),a.getLevels(),m),enableDisableEventGroupButtons();if($("#productGroupSelection").val()){var b=getDictionaryObject(PRODUCT_DICTIONARY),c=JSON.parse($("#productGroupSelection").val());$.each(c,function(a,c){b.addToValuesDicGroup({name:c.name,id:c.id})});m&&b.setProductGroupText(m)}if($("#productSelection").val()){var b=getDictionaryObject(PRODUCT_DICTIONARY),
c=JSON.parse($("#productSelection").val()),d="pva";b.setValues(c);0<$("#selectedDatasource").length&&$("#selectedDatasource").val().includes("faers")?(d="faers",b.setValuesFaers(c)):0<$("#selectedDatasource").length&&$("#selectedDatasource").val().includes("eudra")?(d="eudra",b.setValuesEudra(c)):b.setValuesPva(c);m&&b.setColumnViewText(c,d)}if($("#productSelection").val()||$("#productGroupSelection").val())showDictionaryValues(document.getElementById("showProductSelection"),b.getValues(),PRODUCT_DICTIONARY,
b.getValuesDicGroup(),b.getLevels(),m),enableDisableProductGroupButtons();$("#studySelection").val()&&(c=getDictionaryObject(STUDY_DICTIONARY),c.setValues(JSON.parse($("#studySelection").val())),m&&c.setColumnViewText(c.getValues()),showDictionaryValues(document.getElementById("showStudySelection"),c.getValues(),STUDY_DICTIONARY,[],c.getLevels(),m))})();var A=!1;$(window).keydown(function(a){13==a.keyCode&&A&&a.preventDefault()});$("#productModal, #eventModal, #studyModal").on("shown.bs.modal",function(a){A=
!0}).on("hidden.bs.modal",function(a){A=!1}).on("show.bs.modal",function(a){$(a.relatedTarget).data("hide-dictionary-group")?$(this).find(".dictionary-group").hide():$(this).find(".dictionary-group").show()});$("#eventModal").on("show.bs.modal",function(a){getDictionaryObject(EVENT_DICTIONARY).isReady()?(q=$(a.relatedTarget),$("#mainContent").triggerHandler("columnView.reset."+EVENT_DICTIONARY),g(q)):(a.stopPropagation(),a.preventDefault(),alert("Dictionary browser is loading"),$("#eventModal").modal("hide"))});
$(document).on("click",".removeSingleDictionaryValue",function(a){a=$(this);var c=a.attr("data-type"),b=a.attr("data-level"),d=JSON.parse(a.attr("data-element")),e=$(this).closest(".dictionaryItem").attr("title");$(this).closest(".dictionaryItem").remove();var g=getDictionaryObject(c);g.removeValue(b,d,e);enableDisableProductGroupButtons(g.getValues());b=getDictionaryObject(PRODUCT_DICTIONARY);d=0;n(b.getValuesPva())&&d++;n(b.getValuesFaers())&&d++;n(b.getValuesEudra())&&d++;b.getValuesDicGroup().length&&
"undefined"==typeof a.closest(".dictionaryItem").attr("data-newproduct")&&d?b.isCloseDictionary=!1:b.getValuesDicGroup().length&&!d&&(b.isCloseDictionary=!0);c==EVENT_DICTIONARY&&enableDisableEventGroupButtons()});$(document).on("click",".removeSingleDictionaryProductValue",function(a){a=getDictionaryObject(PRODUCT_DICTIONARY);var b=$(this),b=JSON.parse(b.attr("data-element"));$(this).closest(".productGroupValues").remove();a.setValuesDicGroup(F(a.getValuesDicGroup(),b));a.setSelectedDicGroups(B(a.getSelectedDicGroups(),
b));enableDisableProductGroupButtons(a.getValues())});var F=function(a,b){return _.filter(a,function(a){if(a.id&&b.id){if(a.id===b.id)return!1}else if(a.name===b.name)return!1;return!0})},B=function(a,b){return _.filter(a,function(a){return a.result.id&&b.id&&a.result.id==b.id?!1:!0})};$("ul").on("keypress","li",function(a){92===a.keyCode&&$(this).click()});$(".prodDictFilterColCalc").on("keypress","i.modal-link",function(a){92===a.keyCode&&$(this).click()})});