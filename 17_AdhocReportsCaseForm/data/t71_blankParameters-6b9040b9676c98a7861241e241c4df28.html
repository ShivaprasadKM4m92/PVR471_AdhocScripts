//# sourceMappingURL=blankParameters.js.map
var AJAXKeywordList,AJAXValueSampleList=[],AJAXOperatorStringList,AJAXOperatorNumList,AJAXOperatorDateList,AJAXOperatorValuelessList,AJAXFinished=3,AJAXCount=0,RF_TYPE_TEXT="text",RF_TYPE_STRING="string",RF_TYPE_DATE="date",RF_TYPE_NUMBER="number",RF_TYPE_PART_DATE="partialDate",RF_TYPE_AUTOCOMPLETE="autocomplete",RF_TYPE_NOCACHE_DROP_DOWN="nocachedropdown",EDITOR_TYPE_TEXT=0,EDITOR_TYPE_DATE=1,EDITOR_TYPE_SELECT=2,EDITOR_TYPE_NONE=3,EDITOR_TYPE_AUTOCOMPLETE=4,EDITOR_TYPE_NONECACHE_SELECT=5,DIC_EVENT=
"EVENT",DIC_PRODUCT="PRODUCT",DIC_STUDY="STUDY",LAST_X_DATE_OPERATORS=["LAST_X_DAYS","LAST_X_WEEKS","LAST_X_MONTHS","LAST_X_YEARS"],NEXT_X_DATE_OPERATORS=["NEXT_X_DAYS","NEXT_X_WEEKS","NEXT_X_MONTHS","NEXT_X_YEARS"],RELATIVE_DATE_OPERATORS="YESTERDAY LAST_WEEK LAST_MONTH LAST_YEAR TOMORROW NEXT_WEEK NEXT_MONTH NEXT_YEAR".split(" "),IS_EMPTY_OPERATORS=["IS_EMPTY","IS_NOT_EMPTY"],EQUALS_OPERATORS=["EQUALS","NOT_EQUAL"],CONTAINS_OPERATORS=["CONTAINS","DOES_NOT_CONTAIN"];
$(document).ready(function(){$.each($(".doneLoading"),function(){$(this).hide()});$.each($(".loading"),function(){$(this).show()});$("#selectDate").datepicker({allowPastDates:!0,momentConfig:{culture:userLocale,format:DEFAULT_DATE_DISPLAY_FORMAT}});$(".errorMessageOperator").hide();getAJAXValues();$("#blankValuesJSON").val()});
function getFieldType(a){var b="";if(a.data("isnoncacheselectable"))b=RF_TYPE_NOCACHE_DROP_DOWN;else if(a.data("isautocomplete"))b=RF_TYPE_AUTOCOMPLETE;else switch(a.data("datatype")){case "java.lang.String":b=a.data("istext")?RF_TYPE_TEXT:RF_TYPE_STRING;break;case "java.util.Date":b=RF_TYPE_DATE;break;case "java.lang.Number":b=RF_TYPE_NUMBER;break;case "com.rxlogix.config.PartialDate":b=RF_TYPE_PART_DATE}return b}
function showHideSpecialFields(){"undefined"!=typeof configurationPOIInputsParamsUrl?$.ajax({type:"GET",url:configurationPOIInputsParamsUrl,dataType:"json",success:function(a){a.data?showPOIHideValue(a.data):showPOIHideValue([])}}):showPOIHideValue([])}
function showPOIHideValue(a){$.each($(".globalQueryWrapper input[name$='.specialKeyValue']"),function(b,c){""!==$(c).val()&&(-1!==$.inArray($(c).val(),a)?$(c).closest(".toAddContainerQEV").hide():($(c).closest(".toAddContainerQEV").show(),a.push($(c).val())))});$.each($(".templateQuery-div:visible input[name$='.specialKeyValue']"),function(b,c){""!==$(c).val()&&(-1!==$.inArray($(c).val(),a)?$(c).closest(".toAddContainerQEV").hide():($(c).closest(".toAddContainerQEV").show(),a.push($(c).val())))});
$(".templateQuery-div:visible input[name^='poiInput['].inputPOIKey").each(function(b){-1!==$.inArray($(this).val(),a)?$(this).closest(".poiInputValueContainer").hide():($(this).closest(".poiInputValueContainer").show(),a.push($(this).val()))})}function getAJAXValues(){getDateOperatorsAJAX();getNumOperatorsAJAX();getStringOperatorsAJAX();getValuelessOperatorsAJAX()}
function getDateOperatorsAJAX(){$.ajax({type:"GET",url:dateOperatorsUrl,dataType:"json",success:function(a){AJAXOperatorDateList=a;AJAXCount==AJAXFinished?updateInitialAJAXLists():AJAXCount++}})}function getNumOperatorsAJAX(){$.ajax({type:"GET",url:numOperatorsUrl,dataType:"json",success:function(a){AJAXOperatorNumList=a;AJAXCount==AJAXFinished?updateInitialAJAXLists():AJAXCount++}})}
function getStringOperatorsAJAX(){$.ajax({type:"GET",url:stringOperatorsUrl,dataType:"json",success:function(a){AJAXOperatorStringList=a;AJAXCount==AJAXFinished?updateInitialAJAXLists():AJAXCount++}})}function getValuelessOperatorsAJAX(){$.ajax({type:"GET",url:valuelessOperatorsUrl,dataType:"json",success:function(a){AJAXOperatorValuelessList=a;AJAXCount==AJAXFinished?updateInitialAJAXLists():AJAXCount++}})}
function updateAJAXFields(a){var b=getFieldType($(getFieldFromExpression(a)).find(":selected")),c=getOperatorFromExpression(a);$(c).empty();switch(b){case RF_TYPE_DATE:$.each(AJAXOperatorDateList,function(a,b){$(c).append($("<option></option>").attr("value",this.value).text(this.display))});break;case RF_TYPE_NUMBER:$.each(AJAXOperatorNumList,function(a,b){$(c).append($("<option></option>").attr("value",this.value).text(this.display))});break;case RF_TYPE_NOCACHE_DROP_DOWN:case RF_TYPE_AUTOCOMPLETE:case RF_TYPE_STRING:$.each(AJAXOperatorStringList,
function(a,b){$(c).append($("<option></option>").attr("value",this.value).text(this.display))});break;case RF_TYPE_PART_DATE:$.each(AJAXOperatorDateList,function(a,b){$(c).append($("<option></option>").attr("value",this.value).text(this.display))})}}
function updateAJAXOperators(a,b){b=$(getFieldFromExpression(a)).select2("val");var c=$(getOperatorFromExpression(a))[0].value,e=getIsFromCopyPasteValue(a),h=getFieldType($(getFieldFromExpression(a)).find(":selected"));_.contains(IS_EMPTY_OPERATORS,c)?showHideValue(EDITOR_TYPE_NONE,a):h==RF_TYPE_DATE?_.contains(LAST_X_DATE_OPERATORS,c)||_.contains(NEXT_X_DATE_OPERATORS,c)?showHideValue(EDITOR_TYPE_TEXT,a):_.contains(RELATIVE_DATE_OPERATORS,c)?showHideValue(EDITOR_TYPE_NONE,a):showHideValue(EDITOR_TYPE_DATE,
a):h==RF_TYPE_STRING?e?showHideValue(EDITOR_TYPE_TEXT,a):_.contains(EQUALS_OPERATORS,c)&&AJAXValueSampleList[b]&&0<AJAXValueSampleList[b].length?showHideValue(EDITOR_TYPE_SELECT,a):showHideValue(EDITOR_TYPE_TEXT,a):h==RF_TYPE_NOCACHE_DROP_DOWN?e?showHideValue(EDITOR_TYPE_TEXT,a):_.contains(EQUALS_OPERATORS,c)?showHideValue(EDITOR_TYPE_NONECACHE_SELECT,a):showHideValue(EDITOR_TYPE_TEXT,a):h==RF_TYPE_AUTOCOMPLETE?e?showHideValue(EDITOR_TYPE_TEXT,a):_.contains(EQUALS_OPERATORS,c)?showHideValue(EDITOR_TYPE_AUTOCOMPLETE,
a):showHideValue(EDITOR_TYPE_TEXT,a):h==RF_TYPE_PART_DATE?_.contains(RELATIVE_DATE_OPERATORS,c)?showHideValue(EDITOR_TYPE_NONE,a):showHideValue(EDITOR_TYPE_TEXT,a):showHideValue(EDITOR_TYPE_TEXT,a)}
function updateAJAXValues(a){var b=$(getFieldFromExpression(a)).select2("val"),c=getFieldType($(getFieldFromExpression(a)).find(":selected")),e=getValueSelectFromExpression(a),h=getIsFromCopyPasteValue(a),d=$(getOperatorFromExpression(a))[0].value;$(e).empty();h||_.contains(CONTAINS_OPERATORS,d)?showHideValue(EDITOR_TYPE_TEXT,a):c!=RF_TYPE_DATE&&(c==RF_TYPE_AUTOCOMPLETE?showHideValue(EDITOR_TYPE_AUTOCOMPLETE,a):c==RF_TYPE_NOCACHE_DROP_DOWN?showHideValue(EDITOR_TYPE_NONECACHE_SELECT,a):_.contains(EQUALS_OPERATORS,
d)?loadValues(b,function(b){b&&0!==b.length?($(e).append($("<option></option>")),$.each(b,function(){$(e).append($("<option></option>").attr("value",this).text(this))}),showHideValue(EDITOR_TYPE_SELECT,a)):(getFieldDictionaryFromExpression(a)===DIC_EVENT&&getEventSearchIconFromExpression(a).show(),showHideValue(EDITOR_TYPE_TEXT,a))}):(getFieldDictionaryFromExpression(a)===DIC_EVENT&&getEventSearchIconFromExpression(a).show(),showHideValue(EDITOR_TYPE_TEXT,a)))}
function loadValues(a,b){$.ajax({type:"GET",url:possibleValuesUrl,async:!1,data:{lang:userLocale,field:a},dataType:"json",success:function(c){AJAXValueSampleList[a]=c;b(c)},error:function(a){console.log(a);alert("errr")}})}
function updateInitialAJAXLists(){$.each($("#templateQueriesContainer").find(".expression"),function(){var a=$(this).find(".toAddContainerQEV")[0];updateAJAXFields(a);updateAJAXValues(a);updateAJAXOperators(a)});var a=[];$.each($(".globalQueryWrapper"),function(){var b,c=0;$.each($(this).find(".queryExpressionValues .queryBlankContainer"),function(){var d=this;a.push(setFieldSelect($(getFieldFromExpression(d)),d.querySelector("input.qevReportField").value,c,null,function(a){if($(d).hasClass("toAddContainerQEV")){$(d).removeAttr("id");
$(getFieldFromExpression(d)).select2("readonly",!0);initFieldDescriptionPopup(getFieldFromExpression(d));updateAJAXFields(d);var c=d.querySelector("input.qevOperator").value;$(getOperatorFromExpression(d)).select2("val",d.querySelector("input.qevOperator").value);updateAJAXOperators(d,d.querySelector("input.qevOperator").value);updateAJAXValues(d);$(getOperatorFromExpression(d)).select2("readonly",!0);$(getValueDateFromExpression(d)).datepicker({allowPastDates:!0});$(getFieldFromExpression(d)).attr("name",
"qev["+a+"].field");$(getOperatorFromExpression(d)).attr("name","qev["+a+"].operator");$(getKeyFromExpression(d)).attr("name","qev["+a+"].key");$(getSpecialKeyValueFromExpression(d)).attr("name","qev["+a+"].specialKeyValue");$($(d).find(".isFromCopyPaste")).attr("name","qev["+a+"].isFromCopyPaste");var g=$(getFieldFromExpression(d)).select2("val"),h=getFieldType($(getFieldFromExpression(d)).find(":selected"));if(h!=RF_TYPE_DATE){if(getIsFromCopyPasteValue(d))b=$(getValueTextFromExpression(d)),b.val(d.querySelector("input.qevValue").value);
else if(_.contains(EQUALS_OPERATORS,c)&&h==RF_TYPE_AUTOCOMPLETE){b=$(getValueSelectAutoFromExpression(d));b.select2({minimumInputLength:2,separator:";",multiple:!0,ajax:{quietMillis:300,dataType:"json",url:selectAutoUrl,data:function(a,b){return{field:$(getFieldFromExpression(d)).select2("val"),term:a,max:10*b,lang:userLocale}},results:function(a,b){return{results:a,more:10*b<=a.length}}}});var c=splitStringListIntoArray(d.querySelector("input.qevValue").value),p=[];_.each(c,function(a){p.push({id:a,
text:a})});b.select2("data",p)}else if(_.contains(EQUALS_OPERATORS,c)&&h==RF_TYPE_NOCACHE_DROP_DOWN){b=$(getValueSelectNonCacheFromExpression(d));b.select2({minimumInputLength:0,separator:";",multiple:!0,ajax:{quietMillis:300,dataType:"json",url:selectNonCacheUrl,data:function(a,b){return{field:$(getFieldFromExpression(d)).select2("val"),term:a,max:30,lang:userLocale,page:b}},results:function(a,b){return{results:a,more:30==a.length}}}});var c=splitStringListIntoArray(d.querySelector("input.qevValue").value),
m=[];_.each(c,function(a){m.push({id:a,text:a})});b.select2("data",m)}else _.contains(EQUALS_OPERATORS,c)&&0!=AJAXValueSampleList[g].length?(b=$(getValueSelectFromExpression(d)),b.select2("val",splitStringListIntoArray(d.querySelector("input.qevValue").value))):(b=$(getValueTextFromExpression(d)),b.val(d.querySelector("input.qevValue").value));addCopyPasteModal(d,"",a)}else h==RF_TYPE_DATE?(b=$(getDateParameterFieldBasedOnOperatorSelected(d)),b.val(d.querySelector("input.qevValue").value)):console.log("Error: should have returned one of four value types!");
b.attr("name","qev["+a+"].value")}$(d).hasClass("customSQLValueContainer")&&($(getKeyFromExpression(d)).attr("name","qev["+a+"].key"),$(getSQLValueFromExpression(d)).attr("name","qev["+a+"].value"),$(getSQLKeyFromExpression(d)).text(d.querySelector("input.qevKey").value),$(getSQLValueFromExpression(d)).val(d.querySelector("input.qevValue").value))}));c++})});$.each($(".templateQuery-div"),function(){var b=getTQNum(this),c,d=0;$.each($(this).find(".queryExpressionValues .queryBlankContainer"),function(){var g=
this;$(g).hasClass("toAddContainerQEV")&&($(g).removeAttr("id"),$(getFieldFromExpression(g)).select2("readonly",!0),a.push(setFieldSelect($(getFieldFromExpression(g)),g.querySelector("input.qevReportField").value,d,null,function(a){initFieldDescriptionPopup(getFieldFromExpression(g));updateAJAXFields(g);var d=g.querySelector("input.qevOperator").value;$(getOperatorFromExpression(g)).select2("val",g.querySelector("input.qevOperator").value);updateAJAXOperators(g,g.querySelector("input.qevOperator").value);
updateAJAXValues(g);$(getOperatorFromExpression(g)).select2("readonly",!0);$(getValueDateFromExpression(g)).datepicker({allowPastDates:!0,momentConfig:{culture:userLocale,format:DEFAULT_DATE_DISPLAY_FORMAT}});$(getFieldFromExpression(g)).attr("name",b+".qev["+a+"].field");$(getOperatorFromExpression(g)).attr("name",b+".qev["+a+"].operator");$(getKeyFromExpression(g)).attr("name",b+".qev["+a+"].key");$(getSpecialKeyValueFromExpression(g)).attr("name",b+".qev["+a+"].specialKeyValue");$($(g).find(".isFromCopyPaste")).attr("name",
b+".qev["+a+"].isFromCopyPaste");var f=$(getFieldFromExpression(g)).select2("val"),k=getFieldType($(getFieldFromExpression(g)).find(":selected"));if(k!=RF_TYPE_DATE){if(getIsFromCopyPasteValue(g))c=$(getValueTextFromExpression(g)),c.val(g.querySelector("input.qevValue").value);else if(_.contains(EQUALS_OPERATORS,d)&&k==RF_TYPE_AUTOCOMPLETE){c=$(getValueSelectAutoFromExpression(g));c.select2({separator:";",minimumInputLength:2,multiple:!0,ajax:{quietMillis:300,dataType:"json",url:selectAutoUrl,data:function(a,
b){return{field:$(getFieldFromExpression(g)).select2("val"),term:a,max:10*b,lang:userLocale}},results:function(a,b){return{results:a,more:10*b<=a.length}}}});var d=splitStringListIntoArray(g.querySelector("input.qevValue").value),l=[];_.each(d,function(a){l.push({id:a,text:a})});c.select2("data",l)}else if(_.contains(EQUALS_OPERATORS,d)&&k==RF_TYPE_NOCACHE_DROP_DOWN){c=$(getValueSelectNonCacheFromExpression(g));c.select2({separator:";",minimumInputLength:0,multiple:!0,ajax:{quietMillis:300,dataType:"json",
url:selectNonCacheUrl,data:function(a,b){return{field:$(getFieldFromExpression(g)).select2("val"),term:a,max:30,lang:userLocale,page:b}},results:function(a,b){return{results:a,more:30==a.length}}}});var d=splitStringListIntoArray(g.querySelector("input.qevValue").value),q=[];_.each(d,function(a){q.push({id:a,text:a})});c.select2("data",q)}else _.contains(EQUALS_OPERATORS,d)&&0!=AJAXValueSampleList[f].length?(c=$(getValueSelectFromExpression(g)),c.select2("val",splitStringListIntoArray(g.querySelector("input.qevValue").value))):
(c=$(getValueTextFromExpression(g)),c.val(g.querySelector("input.qevValue").value));addCopyPasteModal(g,b,a)}else k==RF_TYPE_DATE?(c=$(getDateParameterFieldBasedOnOperatorSelected(g)),c.val(g.querySelector("input.qevValue").value)):console.log("Error: should have returned one of four value types!");c.attr("name",b+".qev["+a+"].value")})));$(this).hasClass("customSQLValueContainer")&&($(getKeyFromExpression(this)).attr("name",b+".qev["+d+"].key"),$(getSQLValueFromExpression(this)).attr("name",b+".qev["+
d+"].value"),$(getSQLKeyFromExpression(this)).text(this.querySelector("input.qevKey").value),$(getSQLValueFromExpression(this)).val(this.querySelector("input.qevValue").value));d++});var f=0;$.each($(this.querySelector("div.templateSQLValues")).find(".customSQLValueContainer"),function(){$(getKeyFromExpression(this)).attr("name",b+".tv["+f+"].key");$(getSQLValueFromExpression(this)).attr("name",b+".tv["+f+"].value");$(getSQLKeyFromExpression(this)).text(this.querySelector("input.qevKey").value);$(getSQLValueFromExpression(this)).val(this.querySelector("input.qevValue").value);
f++});var k=0;$.each($(this.querySelector("div.templateSQLValues")).find(".poiInputValueContainer"),function(){$(getPOIKeyTextFromExpression(this)).text(this.querySelector("input.poiKey").value);$(getPOIKeyFromExpression(this)).attr("name","poiInput["+d+"].key").val(this.querySelector("input.poiKey").value);$(getPOIValueFromExpression(this)).attr("name","poiInput["+d+"].value").val(this.querySelector("input.poiValue").value);k++});rearrangePOIInputsCount();$.when.apply($,a).done(showHideSpecialFields)});
$.each($(".loading"),function(){$(this).hide()});$.each($(".doneLoading"),function(){$(this).show();$(".report-edit-button").hasClass("hide")&&$(".report-edit-button").removeClass("hide")});AJAXCount=-1;"true"==$("#queryBlanks").val()&&$(".selectQuery").change();"true"==$("#templateBlanks").val()&&$(".selectTemplate").change();"true"==$("#globalQueryBlanks").val()&&$("#globalQuery").change();var b=$(".templateQueryFieldToUpdate"),c=b.attr("type-name"),b=b.val();$("#templateQueries\\["+b+"\\]\\."+
c).change()}
function selectTemplateOnChange(a,b){var c=getTemplateContainer(a),c=getTemplateValues(c),e=getTemplateWrapperRow(a);$(a).val()&&$(a).val()==b?$(e).find(".ciomsProtectedArea").removeAttr("hidden"):($(e).find("input[id$=blindProtected]").prop("checked",!1),$(e).find("input[id$=privacyProtected]").prop("checked",!1),$(e).find(".ciomsProtectedArea").attr("hidden","hidden"));$(c).empty();getCustomSQLValuesForTemplateAJAX($(a).val(),c);getPOIInputsForTemplateAJAX($(a).val(),c);""!=$(a).val()?($(e).find(".templateViewButton").attr("href",
templateViewUrl+"/"+$(a).val()),$(e).find(".templateViewButton").removeClass("hide"),$(e).find(".newTemplateDiv").addClass("hide")):($(e).find(".templateViewButton").addClass("hide"),$(e).find(".newTemplateDiv").removeClass("hide"))}
function selectQueryOnChange(a){var b=getQueryWrapperRow(a),b=getExpressionValues(b),c=getQueryWrapperRow(a);$(b).empty();-1==getAJAXCount()?(""!=$(a).val()?($(c).find(".queryViewButton").attr("href",queryViewUrl+"/"+$(a).val()),$(c).find(".queryViewButton").removeClass("hide"),$(c).find(".newQuery").addClass("hide")):($(c).find(".queryViewButton").addClass("hide"),$(c).find(".newQuery").removeClass("hide")),getBlankValuesForQueryAJAX($(a).val(),b,getTQNum(b)+"."),getCustomSQLValuesForQueryAJAX($(a).val(),
b,getTQNum(b)+"."),getBlankValuesForQuerySetAJAX($(a).val(),b,getTQNum(b)+".")):$(a).select2("val","")}$(document).on("change",".expressionField",function(){var a=this.parentElement.parentElement,b=$(this)[0].value;updateAJAXFields(a);updateAJAXValues(a);$(getValueSelectFromExpression(a)).select2("val","");$(getValueSelectAutoFromExpression(a)).select2("val","");$(getValueSelectNonCacheFromExpression(a)).select2("val","");$(getValueTextFromExpression(a)).val("");""!=b&&$(this.parentElement).removeClass("has-error")});
$(document).on("change",".expressionOp",function(){var a=this.parentElement.parentElement,b=$(this)[0].value;updateAJAXOperators(a,b);$(getValueSelectFromExpression(a)).select2("val","");$(getValueSelectAutoFromExpression(a)).select2("val","");$(getValueSelectNonCacheFromExpression(a)).select2("val","");$(getValueTextFromExpression(a)).val("")});$(document).on("change",".expressionValueSelect",function(){$(this).parent().removeClass("has-error")});$(document).on("change",".expressionValueText",function(){$(this).parent().removeClass("has-error")});
$(document).on("change",".expressionValueDate",function(){$(this).parent().removeClass("has-error")});
function showHideValue(a,b){switch(a){case EDITOR_TYPE_DATE:$(getValueTextFromExpression(b).parentElement).hide();$(getValueSelectFromExpression(b).parentElement).hide();$(getValueSelectAutoFromExpression(b).parentElement).hide();$(getValueSelectNonCacheFromExpression(b).parentElement).hide();$(getValueDateFromExpression(b).parentElement).show();$(getCopyPasteButtonFromExpression(b).parentElement).hide();break;case EDITOR_TYPE_SELECT:$(getValueTextFromExpression(b).parentElement).hide();$(getValueSelectFromExpression(b).parentElement).show();
$(getValueSelectAutoFromExpression(b).parentElement).hide();$(getValueSelectNonCacheFromExpression(b).parentElement).hide();$(getValueDateFromExpression(b).parentElement).hide();break;case EDITOR_TYPE_NONECACHE_SELECT:$(getValueTextFromExpression(b).parentElement).hide();$(getValueSelectFromExpression(b).parentElement).hide();$(getValueSelectAutoFromExpression(b).parentElement).hide();$(getValueSelectNonCacheFromExpression(b).parentElement).show();$(getValueDateFromExpression(b).parentElement).hide();
break;case EDITOR_TYPE_AUTOCOMPLETE:$(getValueTextFromExpression(b).parentElement).hide();$(getValueSelectFromExpression(b).parentElement).hide();$(getValueSelectAutoFromExpression(b).parentElement).show();$(getValueSelectNonCacheFromExpression(b).parentElement).hide();$(getValueDateFromExpression(b).parentElement).hide();break;case EDITOR_TYPE_NONE:$(getValueTextFromExpression(b).parentElement).hide();$(getValueSelectFromExpression(b).parentElement).hide();$(getValueSelectAutoFromExpression(b).parentElement).hide();
$(getValueSelectNonCacheFromExpression(b).parentElement).hide();$(getValueDateFromExpression(b).parentElement).hide();break;default:$(getValueTextFromExpression(b).parentElement).show(),$(getValueSelectFromExpression(b).parentElement).hide(),$(getValueSelectAutoFromExpression(b).parentElement).hide(),$(getValueSelectNonCacheFromExpression(b).parentElement).hide(),$(getValueDateFromExpression(b).parentElement).hide()}}
function getBlankValuesForQueryAJAX(a,b,c){$.ajax({type:"GET",url:blankValuesForQueryUrl+"?queryId="+a,dataType:"json",success:function(e){0<e.length&&appendNewQEVContainers(e,b,c,0);showHideSpecialFields();setValidQueries(a,b);$(b).trigger("loadBlankAndCustomSqlFieldsComplete")},error:function(){console.log("Error retrieving parameters")}})}
function getCustomSQLValuesForTemplateAJAX(a,b){$.ajax({type:"GET",url:customSQLValuesForTemplateUrl+"?templateId="+a,dataType:"json",success:function(a){0<a.length&&appendNewCSQLContainers(a,b,"tv",getTQNum(b)+".",0);$(b).trigger("loadCustomSQLValuesForTemplateComplete")},error:function(){console.log("Error retrieving custom SQL parameters")}})}
function getPOIInputsForTemplateAJAX(a,b){$.ajax({type:"GET",url:poiInputsForTemplateUrl+"?templateId="+a,dataType:"json",success:function(a){0<a.data.length&&appendNewPOIContainers(a.data,b);rearrangePOIInputsCount();showHideSpecialFields()},error:function(a){console.log("Error retrieving POI parameters parameters")}})}
function getCustomSQLValuesForQueryAJAX(a,b,c){$.ajax({type:"GET",url:customSQLValuesForQueryUrl+"?queryId="+a,dataType:"json",success:function(e){0<e.length&&appendNewCSQLContainers(e,b,"qev",c,0);setValidQueries(a,b);$(b).trigger("loadBlankAndCustomSqlFieldsComplete")},error:function(){console.log("Error retrieving custom SQL parameters")}})}
function getBlankValuesForQuerySetAJAX(a,b,c){$.ajax({type:"GET",url:blankValuesForQuerySetUrl+"?queryId="+a,dataType:"json",success:function(a){if(0<a.length){var h=0,d=[];$.each(a,function(a,e){a=createSingleQueryContainer(b,e[0].queryName);d.push(e[0].queryId);"QUERY_BUILDER"==e[0].type?h=appendNewQEVContainers(e,a,c,h):"CUSTOM_SQL"==e[0].type&&(h=appendNewCSQLContainers(e,a,"qev",c,h))});setValidQueries(d,b);$(b).trigger("loadBlankAndCustomSqlFieldsComplete")}showHideSpecialFields()},error:function(){console.log("Error retrieving set parameters")}})}
function setValidQueries(a,b){$(b.parentElement).find(".validQueries").val(a)}function createSingleQueryContainer(a,b){var c=document.createElement("div");$(c).append("<div>"+b+":</div>");a.appendChild(c);return c}
function appendNewQEVContainers(a,b,c,e){var h=[];_.each(a,function(a){var f=cloneAddContainer();b.appendChild(f);f.qevId=a.id;f.key=a.key;$(getKeyFromExpression(f)).attr("name",c+"qev["+e+"].key");$(getSpecialKeyValueFromExpression(f)).attr("name",c+"qev["+e+"].specialKeyValue");$(getKeyFromExpression(f)).val(a.key);$(getSpecialKeyValueFromExpression(f)).val(a.specialKeyValue);var k=$(getFieldFromExpression(f));k.select2();k.prop("readonly",!0);h.push(setFieldSelect(k,a.field,e,b,function(b){initFieldDescriptionPopup(k);
updateAJAXFields(f);var e=$(getOperatorFromExpression(f));e.select2();e.select2("val",a.operator);e.prop("readonly",!0);updateAJAXOperators(f,a.operator);a.operator!=CONTAINS_OPERATORS&&updateAJAXValues(f);var h=$(getValueSelectFromExpression(f));h.select2();var m=$(getValueSelectAutoFromExpression(f));m.select2({minimumInputLength:2,separator:";",multiple:!0,ajax:{quietMillis:300,dataType:"json",url:selectAutoUrl,data:function(a,b){return{field:$(getFieldFromExpression(f)).select2("val"),term:a,
max:10*b,lang:userLocale}},results:function(a,b){return{results:a,more:10*b<=a.length}}}});var n=$(getValueSelectNonCacheFromExpression(f));n.select2({minimumInputLength:0,separator:";",multiple:!0,ajax:{quietMillis:300,dataType:"json",url:selectNonCacheUrl,data:function(a,b){return{field:$(getFieldFromExpression(f)).select2("val"),term:a,max:30,lang:userLocale,page:b}},results:function(a,b){return{results:a,more:30==a.length}}}});$(getValueDateFromExpression(f)).datepicker({allowPastDates:!0,momentConfig:{culture:userLocale,
format:DEFAULT_DATE_DISPLAY_FORMAT}});k.attr("name",c+"qev["+b+"].field");e.attr("name",c+"qev["+b+"].operator");$($(f).find(".isFromCopyPaste")).attr("name",c+"qev["+b+"].isFromCopyPaste");var e=k.select2("val"),l=getFieldType(k.find(":selected"));l!=RF_TYPE_DATE?(l==RF_TYPE_AUTOCOMPLETE?(m.attr("name",c+"qev["+b+"].value"),$(getValueTextFromExpression(f)).attr("name",c+"qev["+b+"].copyPasteValue")):l==RF_TYPE_NOCACHE_DROP_DOWN?(n.attr("name",c+"qev["+b+"].value"),$(getValueTextFromExpression(f)).attr("name",
c+"qev["+b+"].copyPasteValue")):AJAXValueSampleList[e]&&0<AJAXValueSampleList[e].length?(h.attr("name",c+"qev["+b+"].value"),$(getValueTextFromExpression(f)).attr("name",c+"qev["+b+"].copyPasteValue")):$(getValueTextFromExpression(f)).attr("name",c+"qev["+b+"].value"),addCopyPasteModal(f,c,b)):l==RF_TYPE_DATE?($(getDateParameterFieldBasedOnOperatorSelected(f)).attr("name",c+"qev["+b+"].value"),$(f).find(".copy-n-paste").hide()):console.log("Naming Error: should have returned one of four value types!")}));
e++});$.when.apply($,h).done(showHideSpecialFields);$('[data-toggle="popover"]').popover();return e}function appendNewCSQLContainers(a,b,c,e,h){_.each(a,function(a){if(null!=a.key){var f=cloneCustomSQLValueContainer();b.appendChild(f);f.qevId=a.id;f.key=a.key;$(getKeyFromExpression(f)).attr("name",e+""+c+"["+h+"].key");$(getKeyFromExpression(f)).val(a.key);$(getSQLKeyFromExpression(f)).text(a.key);$(getSQLValueFromExpression(f)).attr("name",e+""+c+"["+h+"].value");h++}});return h}
function appendNewPOIContainers(a,b){var c=0;_.each(a,function(a){var h=clonePOIInputValueContainer();b.appendChild(h);h.key=a;$(getPOIKeyTextFromExpression(h)).text(a);$(getPOIKeyFromExpression(h)).attr("name","poiInput["+c+"].key").val(a);$(getPOIValueFromExpression(h)).attr("name","poiInput["+c+"].value");c++});return c}function getTQNum(a){return $(a).closest(".templateQuery-div").attr("id")}
function cloneAddContainer(){var a=document.getElementById("toAddContainerQEV").cloneNode(!0);a.removeAttribute("id");return a}function cloneCustomSQLValueContainer(){var a=document.getElementById("customSQLValueContainer").cloneNode(!0);a.removeAttribute("id");return a}function clonePOIInputValueContainer(){var a=document.getElementById("poiInputValueContainer").cloneNode(!0);a.removeAttribute("id");return a}function getTemplateWrapperRow(a){return $(a).closest(".templateWrapperRow")}
function getQueryWrapperRow(a){return $(a).closest(".queryWrapperRow")}function getTemplateContainer(a){return $(a).closest(".templateContainer")}function getTemplateValues(a){return $(a[0]).find(".templateSQLValues")[0]}function getExpressionValues(a){return $(a[0]).find(".queryExpressionValues")[0]}function getFieldFromExpression(a){return a.querySelector("select.expressionField")}
function getFieldIsValidatableFromExpression(a){return"true"==$(getFieldFromExpression(a)).find("option:selected").attr("data-validatable")}function getFieldDictionaryFromExpression(a){return $(getFieldFromExpression(a)).find("option:selected").attr("data-dictionary")}function getFieldLevelFromExpression(a){return $(getFieldFromExpression(a)).find("option:selected").attr("data-level")}function getOperatorFromExpression(a){return a.querySelector("select.expressionOp")}
function getValueTextFromExpression(a){return $(a).find(".expressionValueText")[0]}function getValueSelectFromExpression(a){a=$(a).find(".expressionValueSelect");return 1<a.length?a[1]:a[0]}function getValueSelectAutoFromExpression(a){a=$(a).find(".expressionValueSelectAuto");return 1<a.length?a[1]:a[0]}function getValueSelectNonCacheFromExpression(a){a=$(a).find(".expressionValueSelectNonCache");return 1<a.length?a[1]:a[0]}
function getValueDateFromExpression(a){return $(a).find(".expressionValueDate")[0]}function getCopyPasteButtonFromExpression(a){return $(a).find(".copy-n-paste")[0]}function getValueDateInputFromExpression(a){return $(a).find(".expressionValueDateInput")[0]}function getEventSearchIconFromExpression(a){return $(a).find(".fa-search")}function getKeyFromExpression(a){return a.querySelector("input.qevKey")}function getValueMultiselectInputFromExpression(a){return a.querySelector("input.qevValue")}
function getSQLKeyFromExpression(a){return a.querySelector("p.inputSQLKey")}function getSQLValueFromExpression(a){return a.querySelector("input.inputSQLValue")}function getSpecialKeyValueFromExpression(a){return a.querySelector("input.qevSpecialKeyValue")}function getPOIKeyTextFromExpression(a){return a.querySelector("p.inputPOIKeyText")}function getPOIKeyFromExpression(a){return a.querySelector("input.inputPOIKey")}
function getPOIValueFromExpression(a){return a.querySelector("input.inputPOIValue")}function getAJAXCount(){return AJAXCount}function initFieldDescriptionPopup(a){var b=$(a).parent().find('[data-toggle="popover"]');(a=$(a).find("option:selected").attr("data-description"))?(b.show(),b.attr("data-content",a)):b.hide();b.removeAttr("id")}function splitStringListIntoArray(a){if(a)return a.split(";")}
function convertArrayToMultiselectString(a){var b=a;if($.isArray(a))for(var b="",c=0;c<a.length;c++)""!=a&&(b=0!=c?b+(";"+a[c]):b+a[c]);return b}
function setMultiselectValues(){var a,b,c,e,h;$.each($(".templateQuery-div, .globalQueryWrapper"),function(){$.each($(this).find(".toAddContainerQEV"),function(){var d=getFieldType($(getFieldFromExpression(this)).find(":selected"));a=$(getValueSelectFromExpression(this));b=$(getValueSelectAutoFromExpression(this));c=$(getValueSelectNonCacheFromExpression(this));h=$(getValueTextFromExpression(this));switch(d){case RF_TYPE_AUTOCOMPLETE:e=$(getValueMultiselectInputFromExpression(this));e.attr("name",
b.attr("name"));b.removeAttr("name");e.val(convertArrayToMultiselectString(b.select2("val")));break;case RF_TYPE_NOCACHE_DROP_DOWN:e=$(getValueMultiselectInputFromExpression(this));e.attr("name",c.attr("name"));c.removeAttr("name");e.val(convertArrayToMultiselectString(c.select2("val")));break;case RF_TYPE_STRING:e=$(getValueMultiselectInputFromExpression(this)),e.attr("name",a.attr("name")),a.removeAttr("name"),getIsFromCopyPasteValue(this)?e.val(convertArrayToMultiselectString(h.val())):e.val(convertArrayToMultiselectString(a.val()))}})})}
function getDateParameterFieldBasedOnOperatorSelected(a){var b=$(getOperatorFromExpression(a)).val();return _.contains(LAST_X_DATE_OPERATORS,b)||_.contains(NEXT_X_DATE_OPERATORS,b)?getValueTextFromExpression(a):getValueDateInputFromExpression(a)}function rearrangePOIInputsCount(){$("input[name^='poiInput['].inputPOIValue").each(function(a){$(this).attr("name","poiInput["+a+"].value");$(this).closest(".poiInputValueContainer").find("input[name$='].key']").attr("name","poiInput["+a+"].key")})}
function setFieldSelect(a,b,c,e,h){return $.ajax({type:"GET",url:reportFieldsForQueryUrl+"?name="+b,dataType:"json",success:function(b){a.append($("<option></option>").attr("value",b.name).attr("selected",!0).attr("data-dictionary",b.dictionary).attr("data-level",b.level).attr("data-validatable",b.validatable).attr("data-isAutocomplete",b.isAutocomplete).attr("data-isNonCacheSelectable",b.isNonCacheSelectable).attr("data-dataType",b.dataType).attr("data-description",b.description).text(b.displayText));
a.trigger("change");h(c);$(e).trigger("loadBlankAndCustomSqlFieldsComplete")}})};