//# sourceMappingURL=productGroup.js.map
$(document).ready(function(){function f(b,c){c.prepend('<div class="alert alert-danger alert-dismissible" role="alert"> <button type="button" class="close" data-dismiss="alert"> <span aria-hidden="true">&times;</span> <span class="sr-only"><g:message code="default.button.close.label" /></span> </button> '+b+"</div>");setTimeout(function(){$(".alert-danger").remove()},5E3)}$("#dataSourcesProductDict").select2();$("#saveProductGroup").on("click",function(){var b=$("#productGroupModalDict"),c=getDictionaryObject(PRODUCT_DICTIONARY),
d={pva:c.getValuesPva(),faers:c.getValuesFaers(),eudra:c.getValuesEudra()},d={id:$("#productGroupId").val(),groupName:$("#productGroupName").val(),description:$("#descriptionProductGroup").val(),sharedWith:$("#shareWithProductGroup").select2("val").join(";"),data:JSON.stringify(d)};if($("#saveProductGroup").hasClass("updateButton"))c.getSelectedDicGroups().length||(d.copyGroups=c.getValuesDicGroup()[0].id);else{var e=[];c.getValuesDicGroup().length&&($.each(c.getValuesDicGroup(),function(a,b){c.getSelectedDicGroups().length?
c.isShowEnabled(b.id)||e.push(b.id):e.push(b.id)}),d.copyGroups=e.join(","))}""!=$("#productGroupName").val()&&$("#shareWithProductGroup").val()?(b.find(".btn-primary").each(function(){$(this).prop("disabled",!0)}),$.ajax({type:"POST",url:saveProductGroupUrl,data:d,dataType:"json",success:function(a){if(1==a.status){var d;d='<div class="alert alert-success alert-dismissible" role="alert"> <button type="button" class="close" data-dismiss="alert"> <span aria-hidden="true">&times;</span> <span class="sr-only"><g:message code="default.button.close.label" /></span> </button> '+
a.message;d+="</div>";b.modal("hide");$("#productModal .modal-body").prepend(d);$("#mainContent").triggerHandler("columnView.reset."+PRODUCT_DICTIONARY);c.addToValuesDicGroup({name:a.name,id:a.groupId});c.isCloseDictionary=!0;c.setProductGroupUpdateText(a);enableDisableProductGroupButtons(c.getValues());setTimeout(function(){$(".alert-success").remove()},5E3)}else f(a.message,$("#productGroupModalDict .modal-body"))},error:function(a){alert(a);b.modal("hide")},complete:function(){b.find(".btn-primary").each(function(){$(this).prop("disabled",
!1)})}})):f("Please fill the required fields.",$("#productGroupModalDict .modal-body"))});$("#deleteProductGroup").on("click",function(){var b=$("#deleteProdGroupModal");b.modal("show");$("#deleteDlgErrorDiv").hide();b.find("#nameToDelete").text("Are you sure you want to delete the product group ?")});$("#deleteProdGrpButton").on("click",function(){var b=$("#productGroupModalDict"),c=getDictionaryObject(PRODUCT_DICTIONARY),d=$("#deleteProdGroupModal"),e={groupName:$("#productGroupName").val(),id:$("#productGroupId").val()};
$.ajax({type:"POST",url:deleteProductGroupUrl,data:e,dataType:"json",success:function(a){1==a.status?(a='<div class="alert alert-success alert-dismissible" role="alert"> <button type="button" class="close" data-dismiss="alert"> <span aria-hidden="true">&times;</span> <span class="sr-only"><g:message code="default.button.close.label" /></span> </button> '+a.message,a+="</div>",b.modal("hide"),$("#productModal .modal-body").prepend(a),$("#mainContent").triggerHandler("columnView.reset."+PRODUCT_DICTIONARY),
enableDisableProductGroupButtons(c.getValues()),setTimeout(function(){$(".alert-success").remove()},5E3)):f(a.message,$("#productGroupModalDict .modal-body"))},error:function(a){alert(a);b.modal("hide")},complete:function(){d.modal("hide")}})});$(".closeProductGroupModal").on("click",function(){$("#productGroupModalDict").modal("hide")});$(".closeProdGrpDeleteModal").on("click",function(){$("#deleteProdGroupModal").modal("hide")});$(document).on("hidden.bs.modal","#productGroupModalDict",function(b){$("#productGroupModalDict").find(".alert").hide();
$(this).find("input[type=text]").val("").end();$(this).find("#descriptionProductGroup").val("");$(this).find("#shareWithProductGroup").select2("val","");$(this).find("#productGroupId").val("");$(this).find("#productGroupName").val("");$(this).find("#descriptionProductGroup").val("")})});